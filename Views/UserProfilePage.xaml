<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PFE.Views.UserProfilePage"
             xmlns:conv="clr-namespace:PFE.Converters"
             Title="Mes Informations">

    <ContentPage.Resources>
        <ResourceDictionary>
            <conv:StringNotEmptyConverter x:Key="StringNotEmptyConverter" />
            <conv:NullOrEmptyToDefaultConverter x:Key="NullOrEmptyConverter" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <VerticalStackLayout Padding="20"
                         Spacing="15">
        
        <Label Text="{Binding ErrorMessage}"
               TextColor="Tomato"
               HorizontalTextAlignment="Center"
               FontSize="16"
               IsVisible="{Binding ErrorMessage, Converter={StaticResource StringNotEmptyConverter}}" />

        <ContentView IsVisible="{Binding IsAuthenticated}">
            <ScrollView>
                <VerticalStackLayout Spacing="15">

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="Nom :"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                        <Label Grid.Column="1"
                               Text="{Binding Name, Converter={StaticResource NullOrEmptyConverter}}" />
                    </Grid>

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="Email :"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                        <Label Grid.Column="1"
                               Text="{Binding WorkEmail, Converter={StaticResource NullOrEmptyConverter}}" />
                    </Grid>

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="Poste :"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                        <Label Grid.Column="1"
                               Text="{Binding JobTitle, Converter={StaticResource NullOrEmptyConverter}}" />
                    </Grid>

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="DÃ©partement :"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                        <Label Grid.Column="1"
                               Text="{Binding DepartmentName, Converter={StaticResource NullOrEmptyConverter}}" />
                    </Grid>

                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="10">
                        <Label Grid.Column="0"
                               Text="Manager :"
                               FontAttributes="Bold"
                               VerticalOptions="Center" />
                        <Label Grid.Column="1"
                               Text="{Binding ManagerName, Converter={StaticResource NullOrEmptyConverter}}" />
                    </Grid>

                    <ActivityIndicator IsRunning="{Binding IsBusy}"
                                       IsVisible="{Binding IsBusy}"
                                       Color="DodgerBlue" />

                </VerticalStackLayout>
            </ScrollView>
        </ContentView>

    </VerticalStackLayout>
</ContentPage>
